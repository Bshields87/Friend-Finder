<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Survey</title>
</head>
<body>
  <h1>Survey</h1>
  <!-- <form action="/api/friends" method="post"> -->
  <form>
    <div>
        <input type="text" name="name" id="">
        <input type="text" name="photo" id="">
      <p>Who is your hero?</p>

      <input type="radio" name="scores[0]" value="1"> Mother
      <input type="radio" name="scores[0]" value="2">Father
      <input type="radio" name="scores[0]" value="3"> Celebrity
      <input type="radio" name="scores[0]" value="4"> Self
      <input type="radio" name="scores[0]" value="5"> Nobody
    </div>
    <div>
      <p>Question 2</p>

      <input type="radio" name="scores[1]" value="1">
      <input type="radio" name="scores[1]" value="2">
      <input type="radio" name="scores[1]" value="3">
      <input type="radio" name="scores[1]" value="4">
      <input type="radio" name="scores[1]" value="5">
    </div>
    <div>
      <p>Question 3</p>

      <input type="radio" name="scores[2]" value="1">
      <input type="radio" name="scores[2]" value="2">
      <input type="radio" name="scores[2]" value="3">
      <input type="radio" name="scores[2]" value="4">
      <input type="radio" name="scores[2]" value="5">
    </div>
    <div>
        <p>Question 4</p>
  
        <input type="radio" name="scores[3]" value="1">
        <input type="radio" name="scores[3]" value="2">
        <input type="radio" name="scores[3]" value="3">
        <input type="radio" name="scores[3]" value="4">
        <input type="radio" name="scores[3]" value="5">
      </div>
      <div>
        <p>Question 5</p>
  
        <input type="radio" name="scores[4]" value="1">
        <input type="radio" name="scores[4]" value="2">
        <input type="radio" name="scores[4]" value="3">
        <input type="radio" name="scores[4]" value="4">
        <input type="radio" name="scores[4]" value="5">
      </div>
    <input type="submit">
  </form>
<div id="friendResult">
    <p id="friendName"></p>
    <img id="friendImage" src="">
</div>
  <script
  src="https://code.jquery.com/jquery-3.3.1.min.js"
  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
  crossorigin="anonymous"></script>
  <script>
      $("#friendResult").hide();

    $('form').submit( function(event) {
      event.preventDefault();

      $.ajax({
        url: "/api/friends",
        method: "POST",
        data: $(this).serialize()
      }).then(
        function(result){ 
            let friendMatch = JSON.parse(result)
            let friendMatchResult = Object.values(friendMatch)
            console.log(friendMatch)
            console.log("My name is: " + friendMatchResult[0])
            $('form').hide();
            $('h1').hide();
            $("#friendResult").show();
            $("#friendName").html("Hi my name is " + friendMatchResult[0])
            $("#friendImage").attr("src", friendMatchResult[1])
        },     
      
      console.log("submitting form")

      )
    })
  </script>
</body>
</html>